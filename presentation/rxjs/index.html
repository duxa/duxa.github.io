<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">

	<title>TypeScript Innovations</title>

	<link rel="stylesheet" href="../css/reveal.css">
	<link rel="stylesheet" href="../css/theme/black.css" id="theme">
	<link rel="stylesheet" href="assets/css/slides.css">"
	<style type="text/css" media="screen">
		.slides section.has-dark-background,
		.slides section.has-dark-background h3 {
			color: #fff;
		}

		.slides section.has-light-background,
		.slides section.has-light-background h3 {
			color: #222;
		}
	</style>
</head>

<body>

	<div class="reveal">

		<div class="slides">

			<section data-transition="convex-in concave-out">
				<h3>RxJS</h3>
				<small>Andrej Skoryk</small>
			</section>
<section>
<section>
	<div>Simple operators</div>
	<pre>
		<code data-trim data-noescape>Rx.Observable.from([1,2,3,4,5])
				.map(x => x * 2)
				.filter(x => x % 2 === 0)
				.reduce((a, b) => a + b)
				.subscribe(x => console.log(x),
						   error => console.error(error),
						   () => console.log('done'));
		</code>
	</pre>
</section>
	
<section>
	<div>Drag and Drop</div>			
	<pre>
	<code data-trim data-noescape>const { fromEvent } = Rx.Observable;
const target = document.querySelector('.box');

const mouseup = fromEvent(target, 'mouseup');
const mousemove = fromEvent(document, 'mousemove');
const mousedown = fromEvent(target, 'mousedown');

const mousedrag = mousedown.selectMany((md) => {
const startX = md.clientX + window.scrollX,
	startY = md.clientY + window.scrollY,
	startLeft = parseInt(md.target.style.left, 10) || 0,
	startTop = parseInt(md.target.style.top, 10) || 0;
	
return mousemove.map((mm) => {
mm.preventDefault();

return {
	left: startLeft + mm.clientX - startX,
	top: startTop + mm.clientY - startY
};
}).takeUntil(mouseup);
});

const subscription = mousedrag.subscribe((pos) => {
	target.style.top = pos.top + 'px';
	target.style.left = pos.left + 'px';
});</code>
</pre> <a href="https://codepen.io/joshblack/pen/zGZZjX">https://codepen.io/joshblack/pen/zGZZjX</a>

			</section>
<section>
	<div>AJAX</div>
	<pre>
		<code data-trim data-noescape>export function load(url: string) {
					return Observable.create(observer => {
						let xhr = new XMLHttpRequest();
				
						let onLoad = () => {
							if(xhr.status === 200) {
								let data = JSON.parse(xhr.responseText);
								observer.next(data);
								observer.complete();
							} else {
								observer.error(xhr.statusText);
							}
						};
				
						xhr.addEventListener("load", onLoad);
				
						xhr.open("GET", url);
						xhr.send();
				
						return () =>  {
							console.log("cleanup");
							xhr.removeEventListener("load", onLoad);
							xhr.abort();
						}
				
					}).retryWhen(retryStrategy({attempts: 3, delay: 1500}));
				}
		</code>
	</pre>
</section>

<section>
	<div>Subject</div>
	<small>Subject implements both an Observable and Observer. An Observer subscribes to an Observable. An Observerable produces sequences that Observers receive.</small>
</section>


	</section>
		<section>
				<div>Sources</div>
				<small>
					<ul>
						<li>
							<a href="https://www.youtube.com/watch?v=D8pdP2YjiFw"> Luxoft Training Center </a>
						</li>
						<li>
							<a href="https://www.youtube.com/watch?v=3szEGhrFrts"> «RxJS — мифы и реальность», Александр Грибанов</a>
						</li>
						<li>
							<a href="http://reactivex.io">http://reactivex.io</a>
						</li>
					</ul>
				</small>
			</section>
		</div>

	</div>

	<script src="../lib/js/head.min.js"></script>
	<script src="../js/reveal.js"></script>

	<script>

		Reveal.initialize({
			center: true,
			history: true,

			// transition: 'slide',
			// transitionSpeed: 'slow',
			// backgroundTransition: 'slide'

			dependencies: [
				// Syntax highlight for <code> elements
				{ src: 'plugin/highlight/highlight.js', async: true, callback: function () { hljs.initHighlightingOnLoad(); } },
			]
		});




	</script>

</body>

</html>